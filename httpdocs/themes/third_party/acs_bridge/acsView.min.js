(function(a){a.fn.extend({acsView:function(b){var c={start:null,loaderObj:"/themes/third_party/acs_bridge/ajax-loader.gif",showNav:true,navPosition:"both",prevText:"previous",prev:"acs_prev",nextText:"next",next:"acs_next",opacity:.8,overlay:"mask",dialog:"dialog",listId:"acs_events"};var b=a.extend(c,b),d="#"+this.attr("id"),e=this.height(),f=this.width(),g,h,i,j,k,l,m,n,o;if(typeof b.template!=="undefined"){m=function(){e=a("#loader").parent().height();f=a("#loader").parent().width();a("#loader").css({position:"absolute",height:e,width:f,top:0,left:0,"z-index":100});a("#loader img").css({position:"absolute",top:e/2-16,left:f/2-16});a("#loader").fadeIn("slow")};n=function(){g=a(window).height();h=a(window).width();i=a("."+b.dialog).height();j=a("."+b.dialog).width();k=a(document).height();l=a(document).width();a("#"+b.listId).children("."+b.dialog).css({position:"fixed",top:g/2-i/2,left:h/2-j/2});a("#"+b.listId).children("."+b.overlay).css({width:l,height:k})};o=function(c){a.ajaxSetup({beforeSend:function(a){a.setRequestHeader("Cache-Control","max-age=600");a.setRequestHeader("Pragma","cache")}});a.ajax({url:b.template,data:{start:c},dataType:"json",success:function(c){a("#loader").fadeOut("slow").remove();a("#"+b.listId).hide().html(c.output+'<div class="'+b.overlay+'"></div><div class="'+b.dialog+'"></div>').fadeTo("slow",1);if(c.origStart){b.start=c.origStart;b.origStart=c.origStart;b.length=c.displayLength}if(b.showNav===true&&!c.error){if(b.navPosition==="top"||b.navPosition==="both"){if(b.start>b.origStart){a("#"+b.listId).prepend('<button type="button" class="'+b.prev+'" value="'+(b.start-b.length)+'">'+b.prevText+"</button>")}a("#"+b.listId).prepend('<button type="button" class="'+b.next+'" value="'+(b.start+b.length)+'">'+b.nextText+"</button>")}if(b.navPosition==="bottom"||b.navPosition==="both"){if(b.start>b.origStart){a("#"+b.listId).append('<button type="button" class="'+b.prev+'" value="'+(b.start-b.length)+'">'+b.prevText+"</button>")}a("#"+b.listId).append('<button type="button" class="'+b.next+'" value="'+(b.start+b.length)+'">'+b.nextText+"</button>")}}a(b.trigger).bind("click",function(){var c=a(this).attr("href");n();a("#"+b.listId).children("."+b.overlay).fadeTo("fast",.8);a("#"+b.listId).children("."+b.dialog).html('<div id="loader" style="display:none;"><img src="'+b.loaderObj+'" /></div>').fadeIn("slow");m();a.ajax({url:c,dataType:"json",success:function(c){a("#loader").remove();a("#"+b.listId).children("."+b.dialog).html(c.output)}});return false});a("."+b.prev).on("click",function(){var c=parseInt(a("."+b.prev).attr("value"),10);a("#"+b.listId).fadeTo("slow",.2);a(d).append('<div id="loader" style="display:none;"><img src="'+b.loaderObj+'" /></div>');m();b.start=c;o(c)});a("."+b.next).on("click",function(){var c=parseInt(a("."+b.next).attr("value"),10);a("#"+b.listId).fadeTo("slow",.2);a(d).append('<div id="loader" style="display:none;"><img src="'+b.loaderObj+'" /></div>');m();b.start=c;o(c)});a("#"+b.listId).children("."+b.overlay).click(function(){a("#"+b.listId).children("."+b.dialog).fadeOut();a(this).fadeOut()});return false}})};this.html('<div id="'+b.listId+'" style="min-height:'+e+"px; min-width:"+f+'px; position: relative;"><div id="loader" style="display:none;"><img src="'+b.loaderObj+'" /></div></div>');m();o(b.start);a(window).resize(function(){n()})}}})})(jQuery)